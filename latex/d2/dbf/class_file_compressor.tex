\doxysection{File\+Compressor Class Reference}
\hypertarget{class_file_compressor}{}\label{class_file_compressor}\index{FileCompressor@{FileCompressor}}


Provides file compression and decompression using the Shannon–\+Fano algorithm.  




{\ttfamily \#include $<$File\+Compressor.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_file_compressor_a817f13fc2176e7c8ed8758745e1adce5}{print\+\_\+codes}} () const
\begin{DoxyCompactList}\small\item\em Prints all generated symbol codes to the console. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_a1831c73242b2a185eadbfc251fbea272}{decompress}} (const std\+::string \&filename\+\_\+in, const std\+::string \&filename\+\_\+out)
\begin{DoxyCompactList}\small\item\em Decompresses an archived file into its original form. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_a38d6b00d0e9a95d6e438dace5cd6d495}{compress}} (const std\+::string \&filename\+\_\+in, const std\+::string \&filename\+\_\+out)
\begin{DoxyCompactList}\small\item\em Compresses a file and saves it as an archive. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_file_compressor_a113ea2fa053c0ef8b52c909429ad41bf}{count\+\_\+occurances}} (const std\+::string \&filename)
\begin{DoxyCompactList}\small\item\em Counts symbol occurrences in the specified file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_ad99efd6d391f718034408a0bde538896}{sort\+\_\+occurances}} ()
\begin{DoxyCompactList}\small\item\em Sorts symbol occurrences in descending order. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_a0302a7425d48c04cdb435e9525628cea}{supplement\+\_\+codes}} (std\+::optional$<$ std\+::span$<$ std\+::pair$<$ uint8\+\_\+t, size\+\_\+t $>$ $>$ $>$ subset, bool prefix)
\begin{DoxyCompactList}\small\item\em Assigns binary codes to symbols recursively based on Shannon–\+Fano algorithm. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_ae070b8a0439417042c0cc6d31acd8597}{decode\+\_\+bitstream}} (std\+::fstream \&in, std\+::fstream \&out)
\begin{DoxyCompactList}\small\item\em Decodes the bitstream from a compressed file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_af967e8cfb2329e618e507c49334710ba}{load\+\_\+archived}} (std\+::fstream \&file)
\begin{DoxyCompactList}\small\item\em Loads compressed file contents and metadata. \end{DoxyCompactList}\item 
std\+::map$<$ std\+::vector$<$ bool $>$, uint8\+\_\+t $>$ \mbox{\hyperlink{class_file_compressor_a5e34939c4fcd744b62bb0d399236287f}{make\+\_\+code\+\_\+to\+\_\+symbol\+\_\+map}} () const
\begin{DoxyCompactList}\small\item\em Builds a reverse lookup table mapping bit codes to symbols. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_a8fe9681ca40eca99ee1345343f1da9ae}{save\+\_\+archived}} (const std\+::string \&filename, const std\+::string \&input\+\_\+file) const
\begin{DoxyCompactList}\small\item\em Saves compressed data and code table into an archive. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_ae152079f947ca2842765e19ca8afd185}{do\+\_\+\+Fano\+\_\+\+Algorithm}} (std\+::optional$<$ std\+::span$<$ std\+::pair$<$ uint8\+\_\+t, size\+\_\+t $>$ $>$ $>$ vec=std\+::nullopt, size\+\_\+t vec\+\_\+sum=0)
\begin{DoxyCompactList}\small\item\em Performs the Shannon–\+Fano algorithm to generate optimal binary codes. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_a2684146d14ead7afb2eb04ae0f7918e7}{write\+\_\+code\+\_\+table}} (std\+::fstream \&out) const
\begin{DoxyCompactList}\small\item\em Writes the generated code table to the output file stream. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_compressor_a9fc386a3e9e8fedba3be1a12db7fde8f}{write\+\_\+encoded\+\_\+data}} (std\+::fstream \&out, const std\+::string \&input\+\_\+file) const
\begin{DoxyCompactList}\small\item\em Writes encoded binary data of the input file to the output stream. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_file_compressor_abdf3fe353b86c1f022fe69eff09d6e6c}{check\+\_\+file\+\_\+opened}} (std\+::fstream \&file, const std\+::string \&filename)
\begin{DoxyCompactList}\small\item\em Checks whether a file stream is successfully opened. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ std\+::pair$<$ uint8\+\_\+t, size\+\_\+t $>$ $>$ \mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}}
\begin{DoxyCompactList}\small\item\em List of pairs representing symbol and its occurrence count. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{class_file_compressor_a15147a62856ad2c5267543ae816dce4d}{occur\+\_\+sum}} = 0
\begin{DoxyCompactList}\small\item\em Total number of symbol occurrences in the file. \end{DoxyCompactList}\item 
std\+::unordered\+\_\+map$<$ uint8\+\_\+t, std\+::vector$<$ bool $>$ $>$ \mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}} \{\mbox{\hyperlink{_file_compressor_8h_a05418eee13a07a3e66a2c90ff2a92452}{ASCII}}\}
\begin{DoxyCompactList}\small\item\em Map of symbol codes (each symbol represented as a vector of bits). \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Provides file compression and decompression using the Shannon–\+Fano algorithm. 

The \doxylink{class_file_compressor}{File\+Compressor} class handles symbol frequency analysis, code generation, and input/output operations for compression and decompression. 

Definition at line \mbox{\hyperlink{_file_compressor_8h_source_l00027}{27}} of file \mbox{\hyperlink{_file_compressor_8h_source}{File\+Compressor.\+h}}.



\label{doc-func-members}
\Hypertarget{class_file_compressor_doc-func-members}
\doxysubsection{Member Function Documentation}
\Hypertarget{class_file_compressor_abdf3fe353b86c1f022fe69eff09d6e6c}\index{FileCompressor@{FileCompressor}!check\_file\_opened@{check\_file\_opened}}
\index{check\_file\_opened@{check\_file\_opened}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{check\_file\_opened()}{check\_file\_opened()}}
{\footnotesize\ttfamily \label{class_file_compressor_abdf3fe353b86c1f022fe69eff09d6e6c} 
void File\+Compressor\+::check\+\_\+file\+\_\+opened (\begin{DoxyParamCaption}\item[{std\+::fstream \&}]{file}{, }\item[{const std\+::string \&}]{filename}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Checks whether a file stream is successfully opened. 


\begin{DoxyParams}{Parameters}
{\em file} & The file stream to check. \\
\hline
{\em filename} & The file name (used for error messages). \\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::runtime\+\_\+error} & if the file could not be opened.\\
\hline
\end{DoxyExceptions}
Verifies that a file stream is successfully opened. Throws an exception if it fails. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00095}{95}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordflow}{if}\ (!file.is\_open())\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}File:\ "{}}\ +\ filename\ +\ \textcolor{stringliteral}{"{}\ opening\ error"{}});}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a38d6b00d0e9a95d6e438dace5cd6d495}\index{FileCompressor@{FileCompressor}!compress@{compress}}
\index{compress@{compress}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{compress()}{compress()}}
{\footnotesize\ttfamily \label{class_file_compressor_a38d6b00d0e9a95d6e438dace5cd6d495} 
void File\+Compressor\+::compress (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename\+\_\+in}{, }\item[{const std\+::string \&}]{filename\+\_\+out}{}\end{DoxyParamCaption})}



Compresses a file and saves it as an archive. 


\begin{DoxyParams}{Parameters}
{\em filename\+\_\+in} & Input file to compress. \\
\hline
{\em filename\+\_\+out} & Output archive file.\\
\hline
\end{DoxyParams}
Performs full compression process\+:
\begin{DoxyEnumerate}
\item Counts symbol frequencies in the input file.
\item Sorts symbols by frequency.
\item Generates Shannonâ€“\+Fano codes recursively.
\item Saves the code table and encoded data to an archive file. 
\end{DoxyEnumerate}

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00031}{31}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a113ea2fa053c0ef8b52c909429ad41bf}{count\_occurances}}(filename\_in);}
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_ad99efd6d391f718034408a0bde538896}{sort\_occurances}}();}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_ae152079f947ca2842765e19ca8afd185}{do\_Fano\_Algorithm}}();}
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a8fe9681ca40eca99ee1345343f1da9ae}{save\_archived}}(filename\_out,\ filename\_in);}
\DoxyCodeLine{00036\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a113ea2fa053c0ef8b52c909429ad41bf}\index{FileCompressor@{FileCompressor}!count\_occurances@{count\_occurances}}
\index{count\_occurances@{count\_occurances}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{count\_occurances()}{count\_occurances()}}
{\footnotesize\ttfamily \label{class_file_compressor_a113ea2fa053c0ef8b52c909429ad41bf} 
void File\+Compressor\+::count\+\_\+occurances (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Counts symbol occurrences in the specified file. 


\begin{DoxyParams}{Parameters}
{\em filename} & Input file name to analyze.\\
\hline
\end{DoxyParams}
Counts the frequency of each byte (0â€“255) in the specified input file. This information is later used to build the Shannonâ€“\+Fano coding tree. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00106}{106}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00107\ \ \ \ \ std::fstream\ file(filename,\ std::ios::binary\ |\ std::ios::in);}
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_abdf3fe353b86c1f022fe69eff09d6e6c}{check\_file\_opened}}(file,\ filename);}
\DoxyCodeLine{00109\ \ \ \ \ uint8\_t\ character;}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{while}\ (file.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&character),\ 1))\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ std::find\_if(\mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}}.begin(),\ \mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}}.end(),}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ [character](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ pair)\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ pair.first\ ==\ character;}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ \mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}}.end())\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ it-\/>second++;}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}}.emplace\_back(\ character,\ 1\ );}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a15147a62856ad2c5267543ae816dce4d}{occur\_sum}}++;}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_ae070b8a0439417042c0cc6d31acd8597}\index{FileCompressor@{FileCompressor}!decode\_bitstream@{decode\_bitstream}}
\index{decode\_bitstream@{decode\_bitstream}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{decode\_bitstream()}{decode\_bitstream()}}
{\footnotesize\ttfamily \label{class_file_compressor_ae070b8a0439417042c0cc6d31acd8597} 
void File\+Compressor\+::decode\+\_\+bitstream (\begin{DoxyParamCaption}\item[{std\+::fstream \&}]{in}{, }\item[{std\+::fstream \&}]{out}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Decodes the bitstream from a compressed file. 


\begin{DoxyParams}{Parameters}
{\em in} & Input file stream (compressed data). \\
\hline
{\em out} & Output file stream (decompressed data).\\
\hline
\end{DoxyParams}
Decodes a bitstream from the input archive back into raw bytes using the previously reconstructed code table. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00280}{280}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00281\ \ \ \ \ std::map<std::vector<bool>,\ uint8\_t>\ code\_to\_symbol;}
\DoxyCodeLine{00282\ \ \ \ \ code\_to\_symbol\ =\ \mbox{\hyperlink{class_file_compressor_a5e34939c4fcd744b62bb0d399236287f}{make\_code\_to\_symbol\_map}}();}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ totalBits;}
\DoxyCodeLine{00285\ \ \ \ \ in.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&totalBits),\ \textcolor{keyword}{sizeof}(totalBits));}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ std::vector<bool>\ bitsBuffer;}
\DoxyCodeLine{00288\ \ \ \ \ bitsBuffer.reserve(256);}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ uint8\_t\ byte;}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordtype}{int}\ bitPos\ =\ 8;}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bitsRead\ =\ 0;}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{while}\ (bitsRead\ <\ totalBits)\ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitPos\ ==\ 8)\ \{}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!in.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&\textcolor{keywordtype}{byte}),\ 1))\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ bitPos\ =\ 0;}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ bit\ =\ (\textcolor{keywordtype}{byte}\ >>\ (7\ -\/\ bitPos))\ \&\ 1;}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ bitsBuffer.push\_back(bit);}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ bitPos++;}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ bitsRead++;}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ code\_to\_symbol.find(bitsBuffer);}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ code\_to\_symbol.end())\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ out\ <<\ it-\/>second;}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ it-\/>second;}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ bitsBuffer.clear();}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00311\ \ \ \ \ \}}
\DoxyCodeLine{00312\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a1831c73242b2a185eadbfc251fbea272}\index{FileCompressor@{FileCompressor}!decompress@{decompress}}
\index{decompress@{decompress}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{decompress()}{decompress()}}
{\footnotesize\ttfamily \label{class_file_compressor_a1831c73242b2a185eadbfc251fbea272} 
void File\+Compressor\+::decompress (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename\+\_\+in}{, }\item[{const std\+::string \&}]{filename\+\_\+out}{}\end{DoxyParamCaption})}



Decompresses an archived file into its original form. 


\begin{DoxyParams}{Parameters}
{\em filename\+\_\+in} & Input compressed file. \\
\hline
{\em filename\+\_\+out} & Output decompressed file.\\
\hline
\end{DoxyParams}
Decompresses a file previously compressed with the Shannonâ€“\+Fano algorithm. The function loads the code table from the archive, reconstructs the mapping between bit sequences and symbols, and writes the decoded content to the output file. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00012}{12}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00012\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ std::fstream\ in(filename\_in,\ std::ios::in\ |\ std::ios::binary);}
\DoxyCodeLine{00015\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_abdf3fe353b86c1f022fe69eff09d6e6c}{check\_file\_opened}}(in,\ filename\_in);}
\DoxyCodeLine{00016\ \ \ \ \ std::fstream\ out(filename\_out,\ std::ios::out\ |\ std::ios::binary);}
\DoxyCodeLine{00017\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_abdf3fe353b86c1f022fe69eff09d6e6c}{check\_file\_opened}}(out,\ filename\_out);}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_af967e8cfb2329e618e507c49334710ba}{load\_archived}}(in);}
\DoxyCodeLine{00020\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_ae070b8a0439417042c0cc6d31acd8597}{decode\_bitstream}}(in,\ out);}
\DoxyCodeLine{00021\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_ae152079f947ca2842765e19ca8afd185}\index{FileCompressor@{FileCompressor}!do\_Fano\_Algorithm@{do\_Fano\_Algorithm}}
\index{do\_Fano\_Algorithm@{do\_Fano\_Algorithm}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{do\_Fano\_Algorithm()}{do\_Fano\_Algorithm()}}
{\footnotesize\ttfamily \label{class_file_compressor_ae152079f947ca2842765e19ca8afd185} 
void File\+Compressor\+::do\+\_\+\+Fano\+\_\+\+Algorithm (\begin{DoxyParamCaption}\item[{std\+::optional$<$ std\+::span$<$ std\+::pair$<$ uint8\+\_\+t, size\+\_\+t $>$ $>$ $>$}]{vec}{ = {\ttfamily std\+:\+:nullopt}, }\item[{size\+\_\+t}]{vec\+\_\+sum}{ = {\ttfamily 0}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Performs the Shannon–\+Fano algorithm to generate optimal binary codes. 


\begin{DoxyParams}{Parameters}
{\em vec} & Optional span of symbol-\/frequency pairs. \\
\hline
{\em vec\+\_\+sum} & Sum of occurrences in the provided span.\\
\hline
\end{DoxyParams}
Recursively splits a symbol-\/frequency table into two parts of approximately equal total frequency, assigning {\ttfamily 0} and {\ttfamily 1} prefixes to left and right halves. This constructs the Shannonâ€“\+Fano code tree. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00058}{58}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{if}\ (!vec)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}}.size()\ <=\ 1)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a0302a7425d48c04cdb435e9525628cea}{supplement\_codes}}(\mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}},\ 0);}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ vec\ =\ std::span(\mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ vec\_sum\ =\ \mbox{\hyperlink{class_file_compressor_a15147a62856ad2c5267543ae816dce4d}{occur\_sum}};}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{auto}\ occur\ =\ *vec;}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordflow}{if}\ (occur.size()\ ==\ 1)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ sum\_prev\ =\ 0,\ sum\_cur\ =\ 0,\ i\ =\ 0;}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ occur.size()\ \&\&\ sum\_cur\ +\ occur[i].second\ <=\ vec\_sum\ /\ 2)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ sum\_cur\ +=\ occur[i++].second;}
\DoxyCodeLine{00076\ \ \ \ \ \}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ left\_sum\ =\ sum\_cur;}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ right\_sum\ =\ vec\_sum\ -\/\ left\_sum;}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ 0)\ i\ =\ 1;\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ >=\ occur.size())\ i\ =\ occur.size()\ -\/\ 1;\ }
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a0302a7425d48c04cdb435e9525628cea}{supplement\_codes}}(occur.subspan(0,\ i),\ 0);}
\DoxyCodeLine{00084\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a0302a7425d48c04cdb435e9525628cea}{supplement\_codes}}(occur.subspan(i),\ 1);}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_ae152079f947ca2842765e19ca8afd185}{do\_Fano\_Algorithm}}(occur.subspan(0,\ i),\ left\_sum);}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_ae152079f947ca2842765e19ca8afd185}{do\_Fano\_Algorithm}}(occur.subspan(i),\ right\_sum);}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_af967e8cfb2329e618e507c49334710ba}\index{FileCompressor@{FileCompressor}!load\_archived@{load\_archived}}
\index{load\_archived@{load\_archived}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{load\_archived()}{load\_archived()}}
{\footnotesize\ttfamily \label{class_file_compressor_af967e8cfb2329e618e507c49334710ba} 
void File\+Compressor\+::load\+\_\+archived (\begin{DoxyParamCaption}\item[{std\+::fstream \&}]{file}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Loads compressed file contents and metadata. 


\begin{DoxyParams}{Parameters}
{\em filename} & Path to the archived file.\\
\hline
\end{DoxyParams}
Loads the symbolâ€“code mapping from an archive file previously generated by the compressor. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00238}{238}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00239\ \ \ \ \ uint8\_t\ tableSize;}
\DoxyCodeLine{00240\ \ \ \ \ file.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&tableSize),\ \textcolor{keyword}{sizeof}(tableSize));}
\DoxyCodeLine{00241\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}}.clear();}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ tableSize;\ ++i)\ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ uint8\_t\ symbol,\ bitCount;}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ file.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&symbol),\ 1);}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ file.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&bitCount),\ 1);}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ std::vector<bool>\ bits;}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ bits.reserve(bitCount);}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bitsRead\ =\ 0;}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (bitsRead\ <\ bitCount)\ \{}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t\ byte;}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ file.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&\textcolor{keywordtype}{byte}),\ 1);}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ b\ =\ 0;\ b\ <\ 8\ \&\&\ bitsRead\ <\ bitCount;\ ++b)\ \{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ bit\ =\ (\textcolor{keywordtype}{byte}\ >>\ (7\ -\/\ b))\ \&\ 1;}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bits.push\_back(bit);}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bitsRead++;}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}}[symbol]\ =\ bits;}
\DoxyCodeLine{00261\ \ \ \ \ \}}
\DoxyCodeLine{00262\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a5e34939c4fcd744b62bb0d399236287f}\index{FileCompressor@{FileCompressor}!make\_code\_to\_symbol\_map@{make\_code\_to\_symbol\_map}}
\index{make\_code\_to\_symbol\_map@{make\_code\_to\_symbol\_map}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{make\_code\_to\_symbol\_map()}{make\_code\_to\_symbol\_map()}}
{\footnotesize\ttfamily \label{class_file_compressor_a5e34939c4fcd744b62bb0d399236287f} 
std\+::map$<$ std\+::vector$<$ bool $>$, uint8\+\_\+t $>$ File\+Compressor\+::make\+\_\+code\+\_\+to\+\_\+symbol\+\_\+map (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}



Builds a reverse lookup table mapping bit codes to symbols. 

\begin{DoxyReturn}{Returns}
A map that converts binary codes back into corresponding characters.
\end{DoxyReturn}
Builds a reverse mapping from bit sequences to symbols for use during decompression. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00268}{268}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00269\ \ \ \ \ std::map<std::vector<bool>,\ uint8\_t>\ code\_to\_symbol;}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ [symbol,\ bits]\ :\ \mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}})\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ code\_to\_symbol[bits]\ =\ symbol;}
\DoxyCodeLine{00272\ \ \ \ \ \}}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordflow}{return}\ code\_to\_symbol;}
\DoxyCodeLine{00274\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a817f13fc2176e7c8ed8758745e1adce5}\index{FileCompressor@{FileCompressor}!print\_codes@{print\_codes}}
\index{print\_codes@{print\_codes}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{print\_codes()}{print\_codes()}}
{\footnotesize\ttfamily \label{class_file_compressor_a817f13fc2176e7c8ed8758745e1adce5} 
void File\+Compressor\+::print\+\_\+codes (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Prints all generated symbol codes to the console. 

Prints all symbolâ€“code mappings to standard output for debugging and analysis. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00130}{130}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ [symbol,\ code]\ :\ \mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}})\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ std::cout\ <<\ symbol\ <<\ \textcolor{stringliteral}{"{}:\ "{}};}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ y\ :\ code)\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ y;}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{00137\ \ \ \ \ \}}
\DoxyCodeLine{00138\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a8fe9681ca40eca99ee1345343f1da9ae}\index{FileCompressor@{FileCompressor}!save\_archived@{save\_archived}}
\index{save\_archived@{save\_archived}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{save\_archived()}{save\_archived()}}
{\footnotesize\ttfamily \label{class_file_compressor_a8fe9681ca40eca99ee1345343f1da9ae} 
void File\+Compressor\+::save\+\_\+archived (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename}{, }\item[{const std\+::string \&}]{input\+\_\+file}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}



Saves compressed data and code table into an archive. 


\begin{DoxyParams}{Parameters}
{\em filename} & Output archive filename. \\
\hline
{\em input\+\_\+file} & Original input filename.\\
\hline
\end{DoxyParams}
Writes the final archive file, including\+:
\begin{DoxyItemize}
\item the encoded code table (symbols and their bit codes);
\item the encoded bitstream representing the compressed data. 
\end{DoxyItemize}

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00044}{44}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00045\ \ \ \ \ std::fstream\ out(filename,\ std::ios::out\ |\ std::ios::binary);}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_abdf3fe353b86c1f022fe69eff09d6e6c}{check\_file\_opened}}(out,\ filename);}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a2684146d14ead7afb2eb04ae0f7918e7}{write\_code\_table}}(out);}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a9fc386a3e9e8fedba3be1a12db7fde8f}{write\_encoded\_data}}(out,\ input\_file);}
\DoxyCodeLine{00050\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_ad99efd6d391f718034408a0bde538896}\index{FileCompressor@{FileCompressor}!sort\_occurances@{sort\_occurances}}
\index{sort\_occurances@{sort\_occurances}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{sort\_occurances()}{sort\_occurances()}}
{\footnotesize\ttfamily \label{class_file_compressor_ad99efd6d391f718034408a0bde538896} 
void File\+Compressor\+::sort\+\_\+occurances (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Sorts symbol occurrences in descending order. 

Sorts the symbolâ€“frequency pairs in descending order by occurrence count. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00144}{144}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00145\ \ \ \ \ std::sort(\mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}}.begin(),\ \mbox{\hyperlink{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}{occurrences}}.end(),}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ [](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ pair1,\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ pair2)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ return\ pair1.second\ >\ pair2.second;}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00149\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a0302a7425d48c04cdb435e9525628cea}\index{FileCompressor@{FileCompressor}!supplement\_codes@{supplement\_codes}}
\index{supplement\_codes@{supplement\_codes}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{supplement\_codes()}{supplement\_codes()}}
{\footnotesize\ttfamily \label{class_file_compressor_a0302a7425d48c04cdb435e9525628cea} 
void File\+Compressor\+::supplement\+\_\+codes (\begin{DoxyParamCaption}\item[{std\+::optional$<$ std\+::span$<$ std\+::pair$<$ uint8\+\_\+t, size\+\_\+t $>$ $>$ $>$}]{span}{, }\item[{bool}]{prefix}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Assigns binary codes to symbols recursively based on Shannon–\+Fano algorithm. 


\begin{DoxyParams}{Parameters}
{\em span} & Optional span of symbol-\/frequency pairs to process. \\
\hline
{\em prefix} & Prefix flag to differentiate bit assignment.\\
\hline
\end{DoxyParams}
Adds a prefix bit ({\ttfamily 0} or {\ttfamily 1}) to all codes within a given subset of symbols. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00155}{155}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{if}\ (!span)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ x\ :\ *span)\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}}[x.first].push\_back(prefix);}
\DoxyCodeLine{00159\ \ \ \ \ \}}
\DoxyCodeLine{00160\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a2684146d14ead7afb2eb04ae0f7918e7}\index{FileCompressor@{FileCompressor}!write\_code\_table@{write\_code\_table}}
\index{write\_code\_table@{write\_code\_table}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{write\_code\_table()}{write\_code\_table()}}
{\footnotesize\ttfamily \label{class_file_compressor_a2684146d14ead7afb2eb04ae0f7918e7} 
void File\+Compressor\+::write\+\_\+code\+\_\+table (\begin{DoxyParamCaption}\item[{std\+::fstream \&}]{out}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}



Writes the generated code table to the output file stream. 


\begin{DoxyParams}{Parameters}
{\em out} & Output file stream.\\
\hline
\end{DoxyParams}
Serializes the code table into the archive, writing\+:
\begin{DoxyItemize}
\item number of entries,
\item each symbol,
\item bit length,
\item packed bit representation of the code. 
\end{DoxyItemize}

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00170}{170}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00171\ \ \ \ \ uint8\_t\ tableSize\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}}.size());}
\DoxyCodeLine{00172\ \ \ \ \ out.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&tableSize),\ \textcolor{keyword}{sizeof}(tableSize));}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ [symbol,\ bits]\ :\ \mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}})\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ out.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&symbol),\ \textcolor{keyword}{sizeof}(symbol));}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ uint8\_t\ bitCount\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(bits.size());}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ out.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&bitCount),\ \textcolor{keyword}{sizeof}(bitCount));}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ uint8\_t\ buffer\ =\ 0;}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bitPos\ =\ 0;}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{bool}\ bit\ :\ bits)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ buffer\ |=\ (bit\ <<\ (7\ -\/\ bitPos));}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ bitPos++;}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitPos\ ==\ 8)\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&buffer),\ 1);}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer\ =\ 0;}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bitPos\ =\ 0;}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitPos\ !=\ 0)\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ out.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&buffer),\ 1);}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ \ \ \ \ \}}
\DoxyCodeLine{00194\ \}}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a9fc386a3e9e8fedba3be1a12db7fde8f}\index{FileCompressor@{FileCompressor}!write\_encoded\_data@{write\_encoded\_data}}
\index{write\_encoded\_data@{write\_encoded\_data}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{write\_encoded\_data()}{write\_encoded\_data()}}
{\footnotesize\ttfamily \label{class_file_compressor_a9fc386a3e9e8fedba3be1a12db7fde8f} 
void File\+Compressor\+::write\+\_\+encoded\+\_\+data (\begin{DoxyParamCaption}\item[{std\+::fstream \&}]{out}{, }\item[{const std\+::string \&}]{input\+\_\+file}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}



Writes encoded binary data of the input file to the output stream. 


\begin{DoxyParams}{Parameters}
{\em out} & Output file stream. \\
\hline
{\em input\+\_\+file} & Path to the input file.\\
\hline
\end{DoxyParams}
Encodes the input fileâ€™s content using the generated codes and writes the result as a bitstream. 

Definition at line \mbox{\hyperlink{_file_compressor_8cpp_source_l00201}{201}} of file \mbox{\hyperlink{_file_compressor_8cpp_source}{File\+Compressor.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00202\ \ \ \ \ std::fstream\ in(input\_file,\ std::ios::in\ |\ std::ios::binary);}
\DoxyCodeLine{00203\ \ \ \ \ \mbox{\hyperlink{class_file_compressor_abdf3fe353b86c1f022fe69eff09d6e6c}{check\_file\_opened}}(in,\ input\_file);}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ totalBits\ =\ 0;}
\DoxyCodeLine{00206\ \ \ \ \ std::vector<uint8\_t>\ data;}
\DoxyCodeLine{00207\ \ \ \ \ uint8\_t\ ch;}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordflow}{while}\ (in.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&ch),\ 1))\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ data.push\_back(ch);}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ totalBits\ +=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(\mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}}.at(ch).size());}
\DoxyCodeLine{00211\ \ \ \ \ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ out.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&totalBits),\ \textcolor{keyword}{sizeof}(totalBits));}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \ \ uint8\_t\ buffer\ =\ 0;}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordtype}{int}\ bitPos\ =\ 0;}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ c\ :\ data)\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ bits\ =\ \mbox{\hyperlink{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}{codes}}.at(c);}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{bool}\ bit\ :\ bits)\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ buffer\ |=\ (bit\ <<\ (7\ -\/\ bitPos));}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ bitPos++;}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitPos\ ==\ 8)\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&buffer),\ 1);}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer\ =\ 0;}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bitPos\ =\ 0;}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00228\ \ \ \ \ \}}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordflow}{if}\ (bitPos\ !=\ 0)\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ out.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&buffer),\ 1);}
\DoxyCodeLine{00231\ \ \ \ \ \}}
\DoxyCodeLine{00232\ \}}

\end{DoxyCode}


\label{doc-variable-members}
\Hypertarget{class_file_compressor_doc-variable-members}
\doxysubsection{Member Data Documentation}
\Hypertarget{class_file_compressor_a421e8e105f61791a30f55f7f078d1976}\index{FileCompressor@{FileCompressor}!codes@{codes}}
\index{codes@{codes}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{codes}{codes}}
{\footnotesize\ttfamily \label{class_file_compressor_a421e8e105f61791a30f55f7f078d1976} 
std\+::unordered\+\_\+map$<$uint8\+\_\+t, std\+::vector$<$bool$>$ $>$ File\+Compressor\+::codes \{\mbox{\hyperlink{_file_compressor_8h_a05418eee13a07a3e66a2c90ff2a92452}{ASCII}}\}\hspace{0.3cm}{\ttfamily [private]}}



Map of symbol codes (each symbol represented as a vector of bits). 



Definition at line \mbox{\hyperlink{_file_compressor_8h_source_l00034}{34}} of file \mbox{\hyperlink{_file_compressor_8h_source}{File\+Compressor.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00034\ \{\mbox{\hyperlink{_file_compressor_8h_a05418eee13a07a3e66a2c90ff2a92452}{ASCII}}\};}

\end{DoxyCode}
\Hypertarget{class_file_compressor_a15147a62856ad2c5267543ae816dce4d}\index{FileCompressor@{FileCompressor}!occur\_sum@{occur\_sum}}
\index{occur\_sum@{occur\_sum}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{occur\_sum}{occur\_sum}}
{\footnotesize\ttfamily \label{class_file_compressor_a15147a62856ad2c5267543ae816dce4d} 
size\+\_\+t File\+Compressor\+::occur\+\_\+sum = 0\hspace{0.3cm}{\ttfamily [private]}}



Total number of symbol occurrences in the file. 



Definition at line \mbox{\hyperlink{_file_compressor_8h_source_l00032}{32}} of file \mbox{\hyperlink{_file_compressor_8h_source}{File\+Compressor.\+h}}.

\Hypertarget{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc}\index{FileCompressor@{FileCompressor}!occurrences@{occurrences}}
\index{occurrences@{occurrences}!FileCompressor@{FileCompressor}}
\doxysubsubsection{\texorpdfstring{occurrences}{occurrences}}
{\footnotesize\ttfamily \label{class_file_compressor_ad2ce2898cac2aa4d6b38789f5dc66ccc} 
std\+::vector$<$std\+::pair$<$uint8\+\_\+t, size\+\_\+t$>$ $>$ File\+Compressor\+::occurrences\hspace{0.3cm}{\ttfamily [private]}}



List of pairs representing symbol and its occurrence count. 



Definition at line \mbox{\hyperlink{_file_compressor_8h_source_l00030}{30}} of file \mbox{\hyperlink{_file_compressor_8h_source}{File\+Compressor.\+h}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\mbox{\hyperlink{_file_compressor_8h}{File\+Compressor.\+h}}\item 
src/\mbox{\hyperlink{_file_compressor_8cpp}{File\+Compressor.\+cpp}}\end{DoxyCompactItemize}
